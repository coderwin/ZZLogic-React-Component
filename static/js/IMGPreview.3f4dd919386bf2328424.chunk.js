webpackJsonp([14,19],{570:function(t,e,i){"use strict";var n=i(304),o=n.createClass({displayName:"Swipeable",propTypes:{onSwiped:n.PropTypes.func,onSwiping:n.PropTypes.func,onSwipingUp:n.PropTypes.func,onSwipingRight:n.PropTypes.func,onSwipingDown:n.PropTypes.func,onSwipingLeft:n.PropTypes.func,onSwipedUp:n.PropTypes.func,onSwipedRight:n.PropTypes.func,onSwipedDown:n.PropTypes.func,onSwipedLeft:n.PropTypes.func,flickThreshold:n.PropTypes.number,delta:n.PropTypes.number,preventDefaultTouchmoveEvent:n.PropTypes.bool,stopPropagation:n.PropTypes.bool,nodeName:n.PropTypes.string,trackMouse:n.PropTypes.bool},getInitialState:function(){return{x:null,y:null,swiping:!1,start:0}},getDefaultProps:function(){return{flickThreshold:.6,delta:10,preventDefaultTouchmoveEvent:!0,stopPropagation:!1,nodeName:"div"}},calculatePos:function(t){var e=void 0,i=void 0;t.changedTouches?(e=t.changedTouches[0].clientX,i=t.changedTouches[0].clientY):(e=t.clientX,i=t.clientY);var n=this.state.x-e,o=this.state.y-i,s=Math.abs(n),r=Math.abs(o),p=Date.now()-this.state.start,a=Math.sqrt(s*s+r*r)/p;return{deltaX:n,deltaY:o,absX:s,absY:r,velocity:a}},eventStart:function(t){if(!(t.touches&&t.touches.length>1)){var e=t.touches;e||(e=[{clientX:t.clientX,clientY:t.clientY}]),this.props.stopPropagation&&t.stopPropagation(),this.setState({start:Date.now(),x:e[0].clientX,y:e[0].clientY,swiping:!1})}},eventMove:function(t){if(this.state.x&&this.state.y&&!(t.touches&&t.touches.length>1)){var e=!1,i=this.calculatePos(t);i.absX<this.props.delta&&i.absY<this.props.delta||(this.props.stopPropagation&&t.stopPropagation(),this.props.onSwiping&&this.props.onSwiping(t,i.deltaX,i.deltaY,i.absX,i.absY,i.velocity),i.absX>i.absY?i.deltaX>0?(this.props.onSwipingLeft||this.props.onSwipedLeft)&&(this.props.onSwipingLeft&&this.props.onSwipingLeft(t,i.absX),e=!0):(this.props.onSwipingRight||this.props.onSwipedRight)&&(this.props.onSwipingRight&&this.props.onSwipingRight(t,i.absX),e=!0):i.deltaY>0?(this.props.onSwipingUp||this.props.onSwipedUp)&&(this.props.onSwipingUp&&this.props.onSwipingUp(t,i.absY),e=!0):(this.props.onSwipingDown||this.props.onSwipedDown)&&(this.props.onSwipingDown&&this.props.onSwipingDown(t,i.absY),e=!0),this.setState({swiping:!0}),e&&this.props.preventDefaultTouchmoveEvent&&t.preventDefault())}},eventEnd:function(t){if(this.state.swiping){var e=this.calculatePos(t);this.props.stopPropagation&&t.stopPropagation();var i=e.velocity>this.props.flickThreshold;this.props.onSwiped&&this.props.onSwiped(t,e.deltaX,e.deltaY,i,e.velocity),e.absX>e.absY?e.deltaX>0?this.props.onSwipedLeft&&this.props.onSwipedLeft(t,e.deltaX,i):this.props.onSwipedRight&&this.props.onSwipedRight(t,e.deltaX,i):e.deltaY>0?this.props.onSwipedUp&&this.props.onSwipedUp(t,e.deltaY,i):this.props.onSwipedDown&&this.props.onSwipedDown(t,e.deltaY,i)}this.setState(this.getInitialState())},render:function(){var t=Object.assign({},this.props,{onTouchStart:this.eventStart,onTouchMove:this.eventMove,onTouchEnd:this.eventEnd,onMouseDown:this.props.trackMouse&&this.eventStart,onMouseMove:this.props.trackMouse&&this.eventMove,onMouseUp:this.props.trackMouse&&this.eventEnd});return delete t.onSwiped,delete t.onSwiping,delete t.onSwipingUp,delete t.onSwipingRight,delete t.onSwipingDown,delete t.onSwipingLeft,delete t.onSwipedUp,delete t.onSwipedRight,delete t.onSwipedDown,delete t.onSwipedLeft,delete t.flickThreshold,delete t.delta,delete t.preventDefaultTouchmoveEvent,delete t.stopPropagation,delete t.nodeName,delete t.children,delete t.trackMouse,n.createElement(this.props.nodeName,t,this.props.children)}});t.exports=o},592:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var p=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=i(304),l=n(a),c=i(593),u=n(c),h=function(t){function e(t){o(this,e);var i=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.imgs=[{src:"http://pic1.58cdn.com.cn/p1/big/n_v1bl2lwkadoesvqeovmmsq_d016075a4f426d09.png",href:"http://baidu.com"},{src:"http://pic1.58cdn.com.cn/p1/big/n_v1bl2lwwihkimfqvk22brq_6666f81f38fd44ce.png",href:"http://baidu.com"},{src:"http://pic1.58cdn.com.cn//p1/big/n_v1bl2lwklxlxlvooxwzzaq_d016075a4f426d09.png",href:"http://baidu.com"}],i}return r(e,t),p(e,[{key:"close",value:function(){console.log("关闭回调")}},{key:"preview",value:function(){this._preview=(new u.default).init({imgs:this.imgs,callback:this.close.bind(this)})}},{key:"render",value:function(){return l.default.createElement("div",{style:{textAlign:"center",marginTop:"20px"}},l.default.createElement("li",null,"图片大图预览IMGPreview"),l.default.createElement("li",{onClick:this.preview.bind(this)},"点我预览"))}}]),e}(a.Component);e.default=h},593:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var p=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=i(304),l=n(a),c=i(331);i(594);var u=i(570),h=n(u),d=function(t){function e(t){o(this,e);var i=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.state={currentIndex:0,currentTranslateX:0,toast:!1,tosatMsg:i.props.toastMsg},i.initProps(),i}return r(e,t),p(e,[{key:"initProps",value:function(){console.log(this.props.imgs),this.isAmaniting=!1,this.imgsURL=this.getImgsURL(),this.clientWidth=document.documentElement.clientWidth,this.clientHeight=document.documentElement.clientHeight,this.imgsWidth=(this.props.imgs.length+2)*this.clientWidth+"px",this.isMultiple=this.props.imgs.length>1}},{key:"getImgsURL",value:function(){if("string"==typeof this.props.imgs[0])return this.props.imgs;for(var t=[],e=0,i=this.props.imgs.length;e<i;e++)t.push(this.props.imgs[e].src);return console.log(t),t}},{key:"shouldComponentUpdate",value:function(t,e){return this.state.currentTranslateX!=e.currentTranslateX||this.state.toast!=e.toast}},{key:"componentDidUpdate",value:function(){this.setTransform(this.refs.preview,"translate3d("+this.state.currentTranslateX+",0,0)")}},{key:"imageSwipe",value:function(t){var e=this;if(!this.isAmaniting){if(this.state.currentIndex==this.props.imgs.length-1&&"left"==t&&this.props.toastShow)return this.setState({toast:!0}),void setTimeout(function(){e.setState({toast:!1})},1e3);if(0==this.state.currentIndex&&"right"==t&&this.props.toastShow)return this.setState({toast:!0}),void setTimeout(function(){e.setState({toast:!1})},1e3);var i=(this.clientWidth,this.props.imgs.length,this.state.currentIndex);"left"==t?this.setState({isAmaniting:!0,currentIndex:i+1,currentTranslateX:-1*(i+1)*this.clientWidth+"px"}):this.setState({isAmaniting:!0,currentIndex:i-1,currentTranslateX:-1*(i-1)*this.clientWidth+"px"}),this.setTransition(this.refs.preview,"transform "+this.props.duration+"ms ease-in-out"),setTimeout(function(){e.isAmaniting=!1},this.props.duration),console.log("swipe-"+t+this.state.currentIndex)}}},{key:"setTransition",value:function(t,e){t.style.transition=e,t.style.WebkitTransition="-webkit-"+e,t.style.MozTransition="-moz-"+e,t.style.OTransition="-o-"+e}},{key:"setTransform",value:function(t,e){t.classList.remove("zzrc-swipe-reset-transiton"),t.style.transform=e,t.style.WebkitTransform=e,t.style.MozTransform=e,t.style.OTransform=e}},{key:"callback",value:function(){this.props.nextTask()}},{key:"render",value:function(){var t=this;return l.default.createElement(h.default,{onSwipedRight:this.imageSwipe.bind(this,"right"),onSwipedLeft:this.imageSwipe.bind(this,"left")},l.default.createElement("div",{className:"zzrc-preview",onClick:this.callback.bind(this)},l.default.createElement("div",{className:"zzrc-preview-imgs",style:{width:this.imgsWidth},ref:"preview"},this.imgsURL.map(function(e,i){return console.log(e),l.default.createElement("img",{key:i,className:"zzrc-preview-item",src:e,style:{width:t.clientWidth+"px"}})})),l.default.createElement("div",{className:"zzrc-preview-index",style:{top:this.props.indexPosition,display:this.props.indexShow&&this.isMultiple?"block":"none"}},"process"==this.props.indexType?this.props.imgs.map(function(t,e){return l.default.createElement("span",{className:"zzrc-preview-index-item",key:e},"-")}):l.default.createElement("span",null,this.state.currentIndex+1+"/"+this.props.imgs.length)),l.default.createElement("div",{style:{display:this.state.toast?"block":"none"},className:"zzrc-preview-toast"},this.props.toastMsg)))}}]),e}(a.Component);d.propTypes={imgs:l.default.PropTypes.array,autoPlay:l.default.PropTypes.bool,duration:l.default.PropTypes.number,indexShow:l.default.PropTypes.bool,indexType:l.default.PropTypes.string,indexColor:l.default.PropTypes.string,indexPosition:l.default.PropTypes.string,currentIndexColor:l.default.PropTypes.string,toastShow:l.default.PropTypes.bool,toastMsg:l.default.PropTypes.string},d.defaultProps={imgs:[],autoPlay:!0,duration:600,indexType:"number",indexShow:!0,indexColor:"#dbd8d8",indexPosition:"1rem",currentIndexColor:"#ffffff",toastShow:!0,toastMsg:"不能再翻了"};var f=function(){function t(){o(this,t)}return p(t,[{key:"init",value:function(t){var e=this;return this.bindHashChange(),this._preview=document.createElement("div"),document.body.appendChild(this._preview),t.nextTask=function(){e.close(),t.callback&&t.callback()},(0,c.render)(l.default.createElement(d,t),this._preview),this}},{key:"bindHashChange",value:function(){var t=this,e=function e(){t.close(),["hashchange","popstate"].map(function(t){window.removeEventListener(t,e,!1)})};["hashchange","popstate"].map(function(t){window.addEventListener(t,e,!1)})}},{key:"close",value:function(){this._preview&&document.body.removeChild(this._preview),this._preview=null}}]),t}();e.default=f},594:function(t,e,i){var n=i(595);"string"==typeof n&&(n=[[t.id,n,""]]);i(536)(n,{});n.locals&&(t.exports=n.locals)},595:function(t,e,i){e=t.exports=i(535)(),e.push([t.id,".zzrc-preview{position:fixed;left:0;top:0;height:100%;width:100%;background:#000}.zzrc-preview-imgs{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:100%}.zzrc-preview-index{display:block;position:absolute;color:#fff;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%)}.zzrc-preview-toast{position:absolute;left:50%;top:50%;-webkit-transform:translateX(-50%) translateY(-50%);transform:translateX(-50%) translateY(-50%);color:#fff;background:#000;opacity:.7;padding:.26666667rem;border-radius:.21333333rem;font-size:.74666667rem}",""])}});